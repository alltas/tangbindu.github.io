<!DOCTYPE html>
<html data-use-rem>
  <head>
    <meta charset="utf-8">
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport" content="width=device-width, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="description" content="">
    <meta name="keywords" content="">
    <title>标题</title>
    <link rel="stylesheet" href="../css/index.css">
  </head>
  <body ontouchstart="">
  <div class="page page-game show"></div>
  <script src="../js/zepto.js"></script>
  <script src="../js/pixi.v3.js"></script>
  <script src="../js/dust.js"></script>
  <script src="../js/pixi-spine.js"></script>
  <script>
        window.requestAnimFrame = (function(){
              return  window.requestAnimationFrame       || 
                  window.webkitRequestAnimationFrame || 
                  window.mozRequestAnimationFrame    || 
                  window.oRequestAnimationFrame      || 
                  window.msRequestAnimationFrame     || 
                  function(callback, element){
                      return window.setTimeout(callback, 1000 / 30);
                  };
          })();




        this.loader=PIXI.loader.add([{name:"herobone",url:"../bone/bone_girl/Girl_NeuropathyGirl_Suoyou.json"}])
        this.loader.load(function(){
          herosprite = new PIXI.spine.Spine(PIXI.loader.resources.herobone.spineData);
          herosprite.skeleton.flipX=true;
          herosprite.width=herosprite.width/3;
          herosprite.height=herosprite.height/3;
          herosprite.position.x = $(window).width()*.2;
          herosprite.position.y =$(window).height()*.73;
          herosprite.skeleton.setSkinByName("default");
          herosprite.stateData.setMixByName('cazryrun_sender_0', 'cazryrun_sender_0', 0.2);
          herosprite.stateData.setMixByName('1jitiao_sender_0', '1jitiao_sender_0', 0.4);
          herosprite.stateData.setMixByName('2jitiao_sender_0', '2jitiao_sender_0', 0.4);
          var stage=new PIXI.Stage();
          stage.interactive = true;
          var renderer = PIXI.autoDetectRenderer(
              $(window).width(),
              $(window).height(),
              {
                backgroundColor:0x9de3e5
              }
            );
          stage.addChild(herosprite)
          renderer.render(stage);
            herosprite.state.setAnimationByName(0, 'cazryrun_sender_0', true);
           function refresh(){
             
          renderer.render(stage);
              requestAnimFrame(refresh)
           }
           refresh()

            //直接插入body
            $('.page-game').append(renderer.view);  

            stage.on('touchstart', onTouchStart);
            function onTouchStart(){
                  herosprite.state.setAnimationByName(0, '1jitiao_sender_0', false);
                  herosprite.state.addAnimationByName(0, 'cazryrun_sender_0', true,0);
            }
        })

       
  </script>
    

  </body>
</html>


